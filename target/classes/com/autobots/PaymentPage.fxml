<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0" style="-fx-background-color: #F4F4F4;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.autobots.controller.PaymentPageController">
   <children>
       <AnchorPane prefHeight="60.0" styleClass="header-background" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <children>
             <HBox alignment="CENTER_LEFT" spacing="15.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="0.0">
                <children>
                   <Button mnemonicParsing="false" onAction="#onMenu" styleClass="nav-button" text="Menu" />
                   <Label styleClass="header-text" text="|" />
                   <Button mnemonicParsing="false" onAction="#onBack" styleClass="nav-button" text="Back to Cart" />
                </children>
             </HBox>

             <HBox alignment="CENTER_RIGHT" spacing="20.0" AnchorPane.bottomAnchor="0.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="0.0">
                <children>
                   <Label fx:id="headerNameLabel" styleClass="header-text" text="Guest" />
                   <Button mnemonicParsing="false" styleClass="nav-button" text="Logout" />
                </children>
             </HBox>
         </children>
      </AnchorPane>

       <VBox spacing="15.0" AnchorPane.topAnchor="80.0" AnchorPane.bottomAnchor="20.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0">
           <children>
               
               <VBox alignment="CENTER" spacing="10.0">
                   <Label text="Order Option" style="-fx-font-weight: bold; -fx-font-size: 16px;" />
                   <HBox spacing="40" alignment="CENTER" style="-fx-padding: 15; -fx-background-color: white; -fx-background-radius: 30; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 1);">
                       <RadioButton fx:id="pickupRadio" text="Carry Out" selected="true" onAction="#toggleOrderType">
                           <toggleGroup><ToggleGroup fx:id="orderTypeGroup"/></toggleGroup>
                       </RadioButton>
                       <RadioButton fx:id="deliveryRadio" text="Delivery" toggleGroup="$orderTypeGroup" onAction="#toggleOrderType"/>
                   </HBox>
               </VBox>

               <HBox spacing="20" VBox.vgrow="ALWAYS">
                   
                   <VBox spacing="10" prefWidth="350" styleClass="card-pane">
                       <Label text="Order Summary" styleClass="section-header"/>
                       <ListView fx:id="orderSummaryList" VBox.vgrow="ALWAYS"/>
                       <Button text="Remove Selected Item" onAction="#onRemoveItem" style="-fx-font-size: 11px; -fx-text-fill: #D32F2F;"/>
                       
                       <Separator/>
                       
                       <GridPane hgap="10" vgap="5">
                           <columnConstraints>
                               <ColumnConstraints percentWidth="60"/>
                               <ColumnConstraints percentWidth="40"/>
                           </columnConstraints>
                           <Label text="Subtotal:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                           <Label fx:id="subtotalLabel" text="\$0.00" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                           <Label text="Taxes:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                           <Label fx:id="taxLabel" text="\$0.00" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                       </GridPane>

                       <Separator/>

                       <Label text="Tip:" style="-fx-font-weight: bold;"/>
                       <HBox spacing="5">
                           <Button text="10%" onAction="#addTip10" prefWidth="50"/>
                           <Button text="15%" onAction="#addTip15" prefWidth="50"/>
                           <Button text="18%" onAction="#addTip18" prefWidth="50"/>
                           <TextField fx:id="customTipInput" promptText="Custom" prefWidth="70" onKeyTyped="#onCustomTip"/>
                       </HBox>
                       <Label fx:id="tipAmountLabel" text="Tip Added: $0.00" style="-fx-font-size: 12px; -fx-text-fill: gray;"/>

                       <Separator/>

                       <HBox spacing="10">
                           <Label text="Final Total:" style="-fx-font-weight: bold; -fx-font-size: 18px;"/>
                           <Label fx:id="finalTotalLabel" text="\$0.00" style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #2E7D32;"/>
                       </HBox>
                       
                       <HBox spacing="20" alignment="CENTER" style="-fx-padding: 10 0 0 0;">
                           <Button text="Cancel" onAction="#onBack" styleClass="button-secondary"/>
                           <Button text="Place Order" styleClass="button-primary" style="-fx-font-size: 16px; -fx-padding: 10 30;" onAction="#onPlaceOrder"/>
                       </HBox>
                       
                   </VBox>


                   <ScrollPane fitToWidth="true" HBox.hgrow="ALWAYS" style="-fx-background-color: transparent;">
                       <content>
                           <VBox spacing="15" styleClass="card-pane" style="-fx-padding: 20;">
                               
                               <VBox fx:id="storeInfoBox" spacing="5" style="-fx-padding: 15; -fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-color: #f9f9f9;">
                                   <Label text="Pickup Location:" style="-fx-font-weight: bold; -fx-text-fill: #2E7D32;"/>
                                   <Label text="Mom &amp; Pop Pizza" style="-fx-font-size: 16px;"/>
                                   <Label text="123 Flavor Street"/>
                                   <Label text="Marietta, GA 30060"/>
                                   <Label text="(555) 123-4567" style="-fx-text-fill: gray;"/>
                               </VBox>

                               <VBox fx:id="deliveryFormBox" spacing="10" visible="false" managed="false">
                                   <Label text="Delivery Address" style="-fx-font-weight: bold;"/>
                                   <TextField fx:id="streetInput" promptText="Street Line 1"/>
                                   <TextField fx:id="street2Input" promptText="Street Line 2 (Apt, Suite)"/>
                                   <HBox spacing="10">
                                       <TextField fx:id="cityInput" promptText="City" HBox.hgrow="ALWAYS"/>
                                       <TextField fx:id="stateInput" promptText="State" prefWidth="60"/>
                                       <TextField fx:id="zipInput" promptText="Zip" prefWidth="80"/>
                                   </HBox>
                               </VBox>

                               <Separator/>

                               <Label text="Payment Options" style="-fx-font-weight: bold;"/>
                               <HBox spacing="20">
                                   <RadioButton fx:id="cashRadio" text="Cash / Check" selected="true" onAction="#togglePaymentFields">
                                       <toggleGroup><ToggleGroup fx:id="paymentTypeGroup"/></toggleGroup>
                                   </RadioButton>
                                   <RadioButton fx:id="cardRadio" text="Credit / Debit Card" toggleGroup="$paymentTypeGroup" onAction="#togglePaymentFields"/>
                               </HBox>

                               <VBox fx:id="cardBox" spacing="15" visible="false" managed="false">
                                   
                                   <Label text="Billing Address" style="-fx-font-weight: bold;"/>
                                   <CheckBox fx:id="sameAddressCheck" text="Same as Delivery Address" onAction="#toggleBillingAddress"/>
                                   
                                   <VBox fx:id="billingAddressBox" spacing="10">
                                       <TextField fx:id="billingStreetInput" promptText="Billing Street Line 1"/>
                                       <HBox spacing="10">
                                           <TextField fx:id="billingCityInput" promptText="City" HBox.hgrow="ALWAYS"/>
                                           <TextField fx:id="billingZipInput" promptText="Zip" prefWidth="80"/>
                                       </HBox>
                                   </VBox>

                                   <Label text="Credit/Debit Card Details" style="-fx-font-weight: bold;"/>
                                   <ComboBox fx:id="savedCardsCombo" promptText="Select Saved Card" maxWidth="Infinity" onAction="#onSavedCardSelected"/>
                                   
                                   <Label text="Or enter new card:" style="-fx-font-size: 10px; -fx-text-fill: grey;"/>
                                   <TextField fx:id="cardNumberInput" promptText="Card Number"/>
                                   
                                   <HBox spacing="10">
                                       <VBox HBox.hgrow="ALWAYS">
                                           <Label text="Expiration" style="-fx-font-size: 12px;"/>
                                           <TextField fx:id="expInput" promptText="MM/YY"/>
                                       </VBox>
                                       <VBox HBox.hgrow="ALWAYS">
                                           <Label text="CVV" style="-fx-font-size: 12px;"/>
                                           <TextField fx:id="cvvInput" promptText="123"/>
                                       </VBox>
                                   </HBox>
                               </VBox>

                               <Separator/>

                               <Label text="Signature" style="-fx-font-weight: bold;"/>
                               <TextField fx:id="signatureInput" promptText="Type Full Name to Sign"/>

                               <Separator/>

                               </VBox>
                       </content>
                   </ScrollPane>
               </HBox>
           </children>
       </VBox>
   </children>
</AnchorPane>